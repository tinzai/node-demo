webpackJsonp([47],{1196:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",{staticClass:"kd-body kd-body--login"},[r("div",{staticClass:"logo-wrapper kd-center"},[r("span",{staticClass:"logo"},[e.loginLogo?r("img",{staticClass:"custom-logo__img",attrs:{src:e.loginLogo}}):r("i",{staticClass:"icon icon-logo"})])]),e._v(" "),r("form",{staticClass:"kd-form kd-container",on:{submit:function(e){e.preventDefault()}}},[r("div",{staticClass:"kd-field"},[r("label",{staticClass:"kd-field-title",attrs:{for:"username"}},[e._v("账号")]),e._v(" "),r("div",{directives:[{name:"textinput",rawName:"v-textinput"}],staticClass:"kd-textinput"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.user.user_name,expression:"user.user_name",modifiers:{trim:!0}},{name:"focus-fixed",rawName:"v-focus-fixed"}],attrs:{type:"text",id:"username",placeholder:"用户名 / 手机号 / 用户ID"},domProps:{value:e.user.user_name},on:{input:function(t){t.target.composing||e.$set(e.user,"user_name",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),e._v(" "),r("div",{staticClass:"kd-field"},[r("label",{staticClass:"kd-field-title",attrs:{for:"password"}},[e._v("密码")]),e._v(" "),r("div",{directives:[{name:"textinput",rawName:"v-textinput"}],staticClass:"kd-textinput"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"},{name:"focus-fixed",rawName:"v-focus-fixed"}],attrs:{type:"password",id:"password",placeholder:"输入6-20位密码"},domProps:{value:e.user.password},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doLogin(t)},input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})])]),e._v(" "),r("div",{staticClass:"kd-field"},[r("label",{staticClass:"kd-field-title",attrs:{for:"qrcode"}},[e._v("验证码")]),e._v(" "),r("div",{directives:[{name:"textinput",rawName:"v-textinput"}],staticClass:"kd-textinput"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.qr,expression:"user.qr"},{name:"focus-fixed",rawName:"v-focus-fixed"}],attrs:{type:"text",id:"qrcode",placeholder:"请输入验证码"},domProps:{value:e.user.qr},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doLogin(t)},input:function(t){t.target.composing||e.$set(e.user,"qr",t.target.value)}}}),e._v(" "),r("img",{attrs:{src:e.verifyCodeUrl,alt:"验证码",title:"点击刷新验证码"},on:{click:e.changeVerifyCode}})])]),e._v(" "),r("div",{staticClass:"kd-field kd-row kd-row-remembered"},[r("div",{staticClass:"kd-col remember-user-name"},[r("kd-checkbox",{attrs:{id:"remember-user-name"},model:{value:e.rememberedUserName,callback:function(t){e.rememberedUserName=t},expression:"rememberedUserName"}}),e._v(" "),r("label",{attrs:{for:"remember-user-name"},on:{click:function(t){return e.toggleToRemember("userName")}}},[e._v("记住账号")])],1),e._v(" "),r("div",{staticClass:"kd-col remember-password kd-align-center"},[r("kd-checkbox",{attrs:{id:"remember-password"},model:{value:e.rememberedPassword,callback:function(t){e.rememberedPassword=t},expression:"rememberedPassword"}}),e._v(" "),r("label",{attrs:{for:"remember-password"},on:{click:function(t){return e.toggleToRemember("password")}}},[e._v("记住密码")])],1),e._v(" "),r("div",{staticClass:"kd-col kd-align-right"},[r("router-link",{attrs:{to:"/forgot-password"}},[e._v("忘记密码？")])],1)]),e._v(" "),r("div",{staticClass:"kd-buttons"},[r("kd-button",{staticClass:"main-button",on:{click:e.doLogin}},[r("span",[e._v("马上登录")])]),e._v(" "),r("kd-button",{staticClass:"hollow",on:{click:e.goToRegister}},[e._v("免费注册")])],1),e._v(" "),e.isShowedAuthorizeLoginButton?r("div",{staticClass:"authorize-login"},[e._m(0),e._v(" "),r("p",{staticClass:"authorize-login__btns"},[r("a",{on:{click:function(t){return e.doAuthorizeLogin("weixin")}}},[r("i",{staticClass:"icon icon-weixin"})]),r("a",{on:{click:function(t){return e.doAuthorizeLogin("qq")}}},[r("i",{staticClass:"icon icon-qq-im"})])])]):e._e()]),e._v(" "),e.loginTexts&&e.loginTexts.length?r("div",{staticClass:"login-text"},e._l(e.loginTexts,function(t){return r("div",{staticClass:"login-text__item"},e._l(t,function(t){return r("p",[e._v(e._s(t))])}),0)}),0):e._e()])},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("p",[r("span",{staticClass:"authorize-login__line"}),e._v("授权登录"),r("span",{staticClass:"authorize-login__line authorize-login__line--end"})])}]}},351:function(e,t,r){var s=r(0)(r(701),null,null,null);e.exports=s.exports},660:function(e,t,r){"use strict";function s(){}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var s=e.charCodeAt(r);s<128?t+=String.fromCharCode(s):s>127&&s<2048?(t+=String.fromCharCode(s>>6|192),t+=String.fromCharCode(63&s|128)):(t+=String.fromCharCode(s>>12|224),t+=String.fromCharCode(s>>6&63|128),t+=String.fromCharCode(63&s|128))}return t},n=function(e){for(var t="",r=0,s=0,o=0;r<e.length;)s=e.charCodeAt(r),s<128?(t+=String.fromCharCode(s),r++):s>191&&s<224?(o=e.charCodeAt(r+1),t+=String.fromCharCode((31&s)<<6|63&o),r+=2):(o=e.charCodeAt(r+1),c3=e.charCodeAt(r+2),t+=String.fromCharCode((15&s)<<12|(63&o)<<6|63&c3),r+=3);return t};s.prototype={constructor:s,encode:function(e){var t,r,s,n,a,d,c,u="",l=0;for(e=i(e);l<e.length;)t=e.charCodeAt(l++),r=e.charCodeAt(l++),s=e.charCodeAt(l++),n=t>>2,a=(3&t)<<4|r>>4,d=(15&r)<<2|s>>6,c=63&s,isNaN(r)?d=c=64:isNaN(s)&&(c=64),u=u+o.charAt(n)+o.charAt(a)+o.charAt(d)+o.charAt(c);return u},decode:function(){var e,t,r,s,i,a,d,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",u="",l=0;for(c=c.replace(/[^A-Za-z0-9+\/\=]/g,"");l<c.length;)s=o.indexOf(c.charAt(l++)),i=o.indexOf(c.charAt(l++)),a=o.indexOf(c.charAt(l++)),d=o.indexOf(c.charAt(l++)),e=s<<2|i>>4,t=(15&i)<<4|a>>2,r=(3&a)<<6|d,u+=String.fromCharCode(e),64!=a&&(u+=String.fromCharCode(t)),64!=d&&(u+=String.fromCharCode(r));return u=n(u)},multipleEncode:function(e,t){for(;t>0;)e=this.encode(e),t--;return e},multipleDecode:function(e,t){for(;t>0;)e=this.decode(e),t--;return e}},t.a=new s},701:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(985),o=r.n(s);t.default={extends:o.a}},723:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(660),o=r(72),i=r.n(o),n=r(7);t.default={name:"PageAccountLogin",data:function(){return{user:{user_name:"",password:"",type:"",qr:""},agreed:!1,rememberedUserName:!0,rememberedPassword:!1,toRouterName:"Account",verifyCodeVersion:0,verifyCodeColor:"#01beb8"}},computed:{loginLogo:function(){return this.$store.state.loginLogo},device:function(){return this.$store.state.device},loginTexts:function(){return this.$store.state.loginTexts},isShowedAuthorizeLoginButton:function(){var e=this.$store.state;return e.isAPP&&e.isWXP&&e.isShowedAuthorizeLoginButton},verifyCodeUrl:function(){return this.$store.state.logincode?this.$store.state.logincode:this.verifyCode},verifyCode:function(){return"base/getqrlogin.ashx?v="+this.verifyCodeVersion+"&bcolor="+escape(this.verifyCodeColor)}},created:function(){function e(e){r.i(n.apiDoAuthorizeLogin)({key:e}).then(function(e){return e.json()}).then(function(e){"120"===e.S?(t.$message({message:"恭喜你，登录成功！",type:"success"}),t.fetchUserInfo().then(function(){if(t.$route.query.redirect)if(/(?:longhu|baccarat|lhbjm?)(?:room)?\.html/i.test(t.$route.query.redirect)){var e=window.location.protocol+"//"+window.location.hostname+":"+window.location.port;window.location.href=e+t.$route.query.redirect}else t.$router.push({path:t.$route.query.redirect});else t.$router.push({name:t.toRouterName})}),t.fetchSetting()):t.$message({message:e.S+":"+e.D,type:"error"})}).catch(function(e){console.log(e),t.$message({message:"网络异常，请重新登录！",type:"error error-login",force:!0})})}this.$store.commit("setPage",{pageTitle:"登录",className:"page-account-login"}),this.changeVerifyCode(),this.getUserFromCookie();var t=this;window.iosSendMessage=e,window.androidSendMessage=e},methods:{setUser:function(e){return this.$store.commit("uSetUser",e)},fetchUserInfo:function(){return this.$store.dispatch("uFetchUserInfo",{vm:this})},fetchSetting:function(){var e=this;return this.$store.dispatch("uFetchSetting").catch(function(t){console.log(t),e.$message({message:"获取账号个性化设置出错啦！",type:"error",force:!0})})},login:function(e){return this.$store.dispatch("uLogin",e)},validators:function(){return""===this.user.user_name?(this.$message({message:"用户名不能为空!",type:"warning"}),!1):/^[a-zA-Z0-9]+$/.test(this.user.user_name)?this.user.user_name.length>20||this.user.user_name.length<2?(this.$message({message:"用户名长度必须在2-20个字符，<br>手机号码必须是11位标准号码！",type:"warning"}),!1):""===this.user.password?(this.$message({message:"密码不能为空!",type:"warning"}),!1):/[\s\t\n\r]+/g.test(this.user.password)?(this.$message({message:"密码不能包含空格！",type:"warning"}),!1):!(this.user.password.length>20||this.user.password.length<6)||(this.$message({message:"密码长度只能是6-20个字符！",type:"warning"}),!1):(this.$message({message:"用户名只能是数字、字母组合，<br>或者是手机号码！",type:"warning"}),!1)},doLogin:function(){var e=this;!1!==this.validators()&&(this.cacheUserIntoCookie(),this.setUser({isManualLogout:!1}),/AKAPP/i.test(window.navigator.userAgent)&&("android"===this.device?this.user.type="android":"ios"===this.device&&(this.user.type="ios")),this.login({data:this.user}).then(function(t){var r=t.S;if("120"!==r&&e.changeVerifyCode(),"115"===r)e.$message({message:"115: 用户名或密码无效！",type:"warning"});else if("119"===r)e.$message({message:"119: 密码无效！",type:"warning"});else if("444"===r)e.$message({message:"444: 您已登录，如要更换账号，请先退出登录！",type:"warning"});else if("116"===r)e.$message({message:"116: 用户名无效！",type:"warning"});else if("117"===r)e.$message({message:"117: 账户已停用",type:"warning"});else if("118"===r)e.$message({message:"118: 登录密码无效！",type:"warning"});else if("171"===r)e.$message({message:"171: 超出账户一天无效登录次数，账户已锁定!",type:"warning"});else if("172"===r)e.$message({message:"172: 超出单IP尝试次数!",type:"warning"});else if("173"===r)e.$message({message:"173: 超出单IP尝试账户数!",type:"warning"});else if("120"===r){var s=e;e.$message({message:"恭喜你，登录成功！",type:"success"}),e.fetchUserInfo().then(function(){if(s.$route.query.redirect)if(/(?:longhu|baccarat|lhbjm?)(?:room)?\.html/i.test(s.$route.query.redirect)){var e=window.location.protocol+"//"+window.location.hostname+":"+window.location.port;window.location.href=e+s.$route.query.redirect}else s.$router.push({path:s.$route.query.redirect});else s.$router.push({name:s.toRouterName})}),e.fetchSetting()}else e.$message({message:r+": "+t.D,type:"error"})}).catch(function(t){console.log(t),e.$message({message:"网络异常，请重新登录！",type:"error error-login",force:!0})}))},goToRegister:function(){this.$router.push({name:"AccountRegister"})},toggleToRemember:function(e){"userName"===e?this.rememberedUserName=!this.rememberedUserName:"password"===e&&(this.rememberedPassword=!this.rememberedPassword)},getUserFromCookie:function(){var e=i.a.get("cachedUser");void 0!==e&&(e=unescape(e.value).split("|"),this.user.user_name=s.a.multipleDecode(e[0],5),this.user.password=s.a.multipleDecode(e[1],5))},setUserCookie:function(e,t){i.a.create("cachedUser",escape([this.rememberedUserName?s.a.multipleEncode(e,5):"",this.rememberedPassword?s.a.multipleEncode(t,5):""].join("|")),{expires:6048e5})},cacheUserIntoCookie:function(){!1===this.rememberedUserName&&!1===this.rememberedPassword?i.a.remove("cachedUser"):this.setUserCookie(this.user.user_name,this.user.password)},doAuthorizeLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"weixin",t=this.$store.state;t.isAPP&&("android"===t.device?"weixin"===e?this.doAuthorizeLoginByWeiXinForAndroid():"qq"===e&&this.doAuthorizeLoginByQQforAndroid():"ios"===t.device&&("weixin"===e?this.doAuthorizeLoginByWeiXin():"qq"===e&&this.doAuthorizeLoginByQQ()))},doAuthorizeLoginByWeiXin:function(){window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.senderModel.postMessage("loginByWeiXin")},doAuthorizeLoginByWeiXinForAndroid:function(){window.loginObj&&window.loginObj.loginWeiXin&&window.loginObj.loginWeiXin()},doAuthorizeLoginByQQ:function(){},doAuthorizeLoginByQQforAndroid:function(){},changeVerifyCode:function(){this.user.qr="",this.verifyCodeVersion=Math.random(),this.$store.commit("setSiteInfo",{logincode:this.verifyCode})}}}},985:function(e,t,r){var s=r(0)(r(723),r(1196),null,null);e.exports=s.exports}});